var plus=window.plus={};(function(){var n="1.0.0.001",t;plus={init:function(n){(function(){function t(n){n=n.toLowerCase();var t=/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||!/compatible/.test(n)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}}jQuery.browser={};var n=t(navigator.userAgent);n.browser&&(jQuery.browser[n.browser]=!0,jQuery.browser.version=n.version);jQuery.browser.webkit&&(jQuery.browser.safari=!0)})();n=n||{},function(){jQuery.fn.extend({or:function(){return this.length?this:$.or.apply(null,arguments)},visible:function(n,t,i){return n===undefined?this.is(":visible"):this.each(function(){$(this)[n?"show":"hide"](t,i)})},autocomplete:function(n){for(var r,i=$(this),t=0;t<i.length;t++)r=$(i[t]),plus.api.construct("autocomplete",$.extend(n,{selector:r}))}});jQuery.extend({or:function(){for(var n,t=0;t<arguments.length;t++)if(n=arguments[t],n){if(n instanceof Function)return n();if(n instanceof jQuery||(n=$(n)),n.length>0)return n}return new jQuery([])},exist:function(n){return n&&n.length>0}});Array.remove=function(n,t,i){typeof t!="number"&&(t=Array.indexOf(n,t));var r=n.slice((i||t)+1||n.length);return n.length=t<0?n.length+t:t,n.push.apply(n,r)};Array.removeIf=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])&&(Array.remove(n,i),i=i-1,r=r-1)};Array.indexOf=function(n,t,i){i||(i=0);var r=n.length;if(i>=0)for(;i<r;i++)if(n[i]===t)return i;return-1};Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){return Array.indexOf(this,n,t)})}();n.url&&(plus.config.baseUrl=n.url);plus.json.init()},config:{baseUrl:"http://localhost/apis",url:{},current:1,defaultCols:["ID","Name","ParentID","ChildNodes"],lang:[{title:"English",symbol:"en",dateFormat:"yyyy-mm-dd"},{title:"Dari",symbol:"da",alt:3,calendar:"shamsi",dateFormat:"yyyy-mm-dd",separator:" ,"},{title:"Pashto",symbol:"pa",alt:3,calendar:"shamsi",dateFormat:"yyyy-mm-dd",separator:" ,"}],setCalendar:function(n){var t=plus.config.lang[n],i=$.calendars.instance(t.calendar,t.symbol);$.calendars.picker.setDefaults({calendar:i,dateFormat:t.dateFormat});$.calendars.picker.setDefaults($.calendars.picker.regional[t.symbol==="en"?"":t.symbol]);plus.config.current=n;plus.config.defaultCols="ID,Name,ParentID,ChildNodes".replace("Name",t.title).split(",")},translate:!1},templ:{get:function(n,t,i){if(n instanceof jQuery||n instanceof Object==!1&&n[0]=="<")return n;n=n+(t?"?ts="+(new Date).getTime():"");var r;return plus.data.get({url:n,async:!1,contentType:null,dataType:null,noLoading:!!i,success:function(n){r=n}}),typeof r=="string"?r:r.responseText}},meta:{},api:{baseUrl:"http://localhost/apis/",repository:"http://localhost/apis/",getVersion:function(){return n},path:function(){return plus},avail:function(t,i,r){i instanceof Function&&(r=i,i=null);r=r||$.noop;i=i||n;plus[t]||$.ajax({async:!1,url:plus.api.baseUrl+"plus."+t+"-v"+i+".js",dataType:"script",success:r})},construct:function(n,t,i){plus.api.avail(n);var r=plus.api.path();return new r[n](t,i)}},widget:{cover:function(n){$.or("#cover",function(){return $('<div id="cover"><\/div>').appendTo("body")})[n?"show":"hide"]()},loading:function(n,t){t=t||"loading...";plus.widget.cover(n);$.or(".loading, #loading",function(){return $('<div class="loading"><\/div>').appendTo("body")}).html(t)[n?"show":"hide"]()},message:function(n,t,i){var u,r,f,e;if(t){if($("#left-bar").size()){$("#left-bar").animate({left:"0px"},150,function(){$("#left-bar").trigger("mouseout")});u=function(){var t=new Date,n=t.getHours(),i=" AM";return n>=12&&(n=n>12?n-12:12)&&(i=" PM"),("0"+n).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+i}();r=$("<li><\/li>").hide();$("#left-bar > ul").prepend(r);f=$("<p><\/p>").appendTo(r).addClass(n);t="<span class='time'>"+u+"<\/span><bdi>"+t+"<\/bdi>";f.html(t);r.css({position:"absolute",bottom:"0"}).show().animate({bottom:$(window).height()-140},500,function(){r.css({position:""})});return}i=i||$("body");e=$.or(".message",function(){return $('<div class="message"><\/div>').appendTo("body")});e.addClass(n).html(t).fadeIn().delay(5e3).fadeOut("slow")}},warn:function(n,t){plus.widget.message("warn",n,t)},error:function(n,t){plus.widget.message("error",n,t)},success:function(n,t){plus.widget.message("success",n,t)},confirm:function(n,t,i){plus.widget.cover(!0);i||(i=t,t=$("body"));var r=$('<div class="div-form dialog message"><\/div>').appendTo(t);r.append("<h2>"+n+"<\/h2>");r.append('<div class="div-form-control"><input action="OK" value="بلی" type="submit">&nbsp;<input action="close" value="فسخ" type="submit"><\/div>');r.find('[action="close"]').click(function(){plus.widget.cover(!1);r.remove()});r.find('[action="OK"]').click(function(){plus.util.invoke(i);plus.widget.cover(!1);r.remove()})}},json:{init:function(){window.JSON2&&(window.JSON||(window.JSON=JSON2,window.JSON.parse=function(n){return new Function("return "+n)()}),window.JSON.stringify=JSON2.stringify)},read:function(n){return JSON.parse(n.d)},write:function(n){return JSON.stringify(n)}},date:{calendar:function(){return plus.config.current?$.calendars.instance("shamsi","da"):$.calendars.instance("")},read:function(n,t){if(!n)return n;var i=n?n instanceof Date?n:plus.date.calendar().parseDate(t||"yyyy-mm-dd",n.substring(0,10)).toJSDate():null;return i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2)},readAsDate:function(n,t){return n?n instanceof Date?n:plus.date.calendar().parseDate(t||"yyyy-mm-dd",n.substring(0,10)).toJSDate():null},write:function(n){return n?(n=new Date(n),plus.date.calendar().fromJSDate(n).formatDate("yyyy-mm-dd")):""}},util:{Translate:function(n){var t=[];n instanceof Array?t=n:t.push(n);try{plus.data.post({service:"json/pull.asmx/Translate",noLoading:!0,async:!1,data:plus.json.write({phrases:t,screen:plus.page.prototype.deserialize().path}),success:function(n){t=plus.json.read(n)}})}catch(i){console.log(i);plus.widget.error("Error In Translation!")}return n instanceof Array?t:t[0]},isNumeric:function(n){return typeof n=="number"||+n==n&&n.length>0},format:function(n,t,i){var u,r;if(!i)return n;if(t instanceof Array)for(key in i)u=i[key],isNaN(u)||(u={index:u}),r=t[u.index],r=r==null?"":this.accounting(r,key),u.fn&&(r=r[0]),n=n.replace(new RegExp("{"+key+"}","g"),r);else for(key in i)r=t[key],r=r==null?"":this.accounting(r,key),typeof i[key]!="number"&&key.fn=="first"&&(r=r[0],key=key.index),n=n.replace(new RegExp("{"+key+"}","g"),t[key]);return n},pascalToSpace:function(n){for(var i,u,r="",t=0;t<n.length;t++)i=n.charAt(t),u=n.charAt(t+1),t>0&&i==i.toUpperCase()&&t<n.length-1&&u==u.toLowerCase()&&(r+=" "),r+=i;return r},accounting:function(n,t){return t&&t.length>=2&&(t.substr(t.length-2,2).toLowerCase()=="id"||t.substr(t.length-4,4).toLowerCase()=="code"||t.substr("mobile")>-1||t.substr("phone")>-1)||t.toLowerCase().indexOf("year")>-1?n:$.isNumeric(n)?(n+"").length>3&&(n+"").substr(0,1)=="0"?n:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):n},toDari:function(n){return n=n+"",n.replace(/1/g,"۱").replace(/2/g,"۲").replace(/3/g,"۳").replace(/4/g,"۴").replace(/5/g,"۵").replace(/6/g,"۶").replace(/7/g,"۷").replace(/8/g,"۸").replace(/9/g,"۹").replace(/0/g,"۰")},toEnglish:function(n){return n=n+"",n.replace(/۱/g,"1").replace(/۲/g,"2").replace(/۳/g,"3").replace(/۴/g,"4").replace(/۵/g,"5").replace(/۶/g,"6").replace(/۷/g,"7").replace(/۸/g,"8").replace(/۹/g,"9").replace(/۰/g,"0")},toWords:function(n){var s=["","هزار , "," میلیون , ","بیلیون , ","تریلیون  , "],e=["صفر"," و یک"," و دو"," و سه"," و چهار"," و پنج"," و شش"," و هفت"," و هشت"," و نه"],h=[" و ده"," و یازده"," و دوازده"," و سیزده"," و چهارده"," و پنزده"," و شنزده"," و هفده"," و هشده"," و نزده"],c=[" و بیست"," و سی"," و چهل"," و پنجاه"," و شصت"," و هفتاد"," و هشتاد"," و نود"],i,o,t;if((n=plus.util.toNumber(n),isNaN(n))||(n=n.toString(),n=n.replace(/[\, ]/g,""),n!=String(parseFloat(n))))return"";if(i=n.indexOf("."),i==-1&&(i=n.length),i>15)return"نمبر کلان است";var u=n.split(""),r="",f=0;for(t=0;t<i;t++)(i-t)%3==2?u[t]=="1"?(r+=h[Number(u[t+1])]+" ",t++,f=1):u[t]!=0&&(r+=c[u[t]-2]+" ",f=1):u[t]!=0&&(r+=e[u[t]]+" ",(i-t)%3==0&&(r+="صد  "),f=1),(i-t)%3==1&&(f&&(r+=s[(i-t-1)/3]+" "),f=0);if(i!=n.length)for(o=n.length,r+="اعشاریه ",t=i+1;t<o;t++)r+=e[u[t]]+" ";return r=r.substring(3,r.length),r.replace(/\s+/g," ")},toNumber:function(n){return n?(n=n.toString(),plus.util.round2(Number(n.replace(/,/g,"")))):n},round2:function(n){return Math.round(n*Math.pow(10,2))/Math.pow(10,2)},invoke:function(n,t){var r,i;if($.isFunction(n)||(t!=null&&(n=t[n]),$.isFunction(n))){for(r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n.apply(t,r)}},replaceAll:function(n,t,i){return n=n+"",n.replace(new RegExp(t,"g"),i)}},data:{get:function(n){return $.extend(n,{type:"get"}),plus.data.ajax(n)},post:function(n){return $.extend(n,{type:"post"}),plus.data.ajax(n)},ajax:function(n){var u=n.url||plus.config.baseUrl+n.service;n.url||$.extend(n,{url:u});var i=n.complete,r=n.success,t=plus.widget;return n.contentType=n.contentType===undefined?"application/json; charset=utf-8":n.contentType,n.dataType=n.dataType===undefined?"json":n.dataType,n.noLoading||t.loading(!0),$.ajax($.extend(n,{timeout:3e5,complete:function(r,u){u!=="timeout"&&((r.status===400||r.status===404)&&t.error("Invalid request: "+n.url),i&&i(r))},success:function(i,u){if(i==null)t.error("Web service returned nothing. That maybe caused by caling it from a different domain.");else{if(n.noLoading||t.loading(!1,n.element),t.message(""),n.contentType=="application/json; charset=utf-8"){var f=plus.json.read(i);if(f=$.isArray(f)?f[0]:f,f==plus.config.baseUrl+"security/unauthorized/"&&(window.location.href=f),f.error)return plus.widget.error(f.error)}r&&r(i,u,n)}},error:function(i,r,u){if(n.noLoading||t.loading(!1,n.element),r==null)t.error("Web service not accessible");else if(r==="timeout")t.error("timeout");else if(r=="parseerror")t.error("The url {0} did not respond.".replace("{0}",n.url));else if(r.toLowerCase()=="abort")t.error("","");else if(i.getResponseHeader("jsonerror")){var f=json.read(i.responseText);t.error(f.Message)}else t.error((r?r+" ":"")+(u||"")||i.responseText)}}))}}};t=plus.widget})();